<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sweety World - –ú–∞–≥–∞–∑–∏–Ω –Ω–∞—Å—Ç—Ä–æ—é</title>
    
    <!-- 1. React -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- 2. Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 3. Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 4. Lucide Icons (–°—Ç–∞–±—ñ–ª—å–Ω–∞ –≤–µ—Ä—Å—ñ—è) -->
    <script src="https://unpkg.com/lucide-react@0.292.0/dist/lucide-react.umd.js"></script>

    <!-- 5. Firebase (Compat - –Ω–∞–¥—ñ–π–Ω–∞ –≤–µ—Ä—Å—ñ—è –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞) -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');
        body { font-family: 'Nunito', sans-serif; background-color: #fff0f5; }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #ec4899; border-radius: 10px; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #ec4899; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #error-root { display: none; padding: 20px; background: #fee2e2; color: #b91c1c; border: 1px solid #ef4444; margin: 20px; border-radius: 8px; font-family: monospace; }
    </style>
</head>
<body>
    <div id="error-root"></div>
    <div id="root"></div>

    <script type="text/babel">
        // ============================================================
        // –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø FIREBASE (conone-757e4)
        // ============================================================
        const firebaseConfig = {
          apiKey: "AIzaSyAu47cciZnYXyEPMTHeH7a1bmX-kCYtGQA",
          authDomain: "conone-757e4.firebaseapp.com",
          projectId: "conone-757e4",
          storageBucket: "conone-757e4.firebasestorage.app",
          messagingSenderId: "960208791384",
          appId: "1:960208791384:web:9e9e109b9df3c1bd95a72d",
          measurementId: "G-B1T6D9BNWN"
        };
        // ============================================================

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
        let db;
        try {
            if (window.firebase) {
                firebase.initializeApp(firebaseConfig);
                db = firebase.firestore();
                console.log("Firebase 'conone' —É—Å–ø—ñ—à–Ω–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ");
            } else {
                throw new Error("–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ Firebase –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–∞—Å—å");
            }
        } catch (error) {
            console.error("–ü–æ–º–∏–ª–∫–∞ Firebase:", error);
        }

        const { useState, useEffect, useMemo } = React;
        
        // –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–∫–æ–Ω–∫–∏
        const Icons = window.lucideReact || {};
        const FallbackIcon = () => <span style={{fontSize: '10px'}}>?</span>;
        
        const { 
            ShoppingCart = FallbackIcon, X = FallbackIcon, Star = FallbackIcon, 
            Lock = FallbackIcon, Trash2 = FallbackIcon, Plus = FallbackIcon, 
            Edit2 = FallbackIcon, ArrowLeft = FallbackIcon, Image: ImageIcon = FallbackIcon, 
            Gift = FallbackIcon, Heart = FallbackIcon, Truck = FallbackIcon, 
            CreditCard = FallbackIcon, Banknote = FallbackIcon, Phone = FallbackIcon, 
            LogOut = FallbackIcon, Upload = FallbackIcon, Menu = FallbackIcon, 
            Minus = FallbackIcon, Send = FallbackIcon 
        } = Icons;

        // –õ–æ–≥–æ—Ç–∏–ø
        const StitchLogo = () => (
            <svg viewBox="0 0 100 100" className="w-10 h-10 drop-shadow-sm transform hover:scale-110 transition duration-300">
                <path d="M5 30 Q-5 0 40 25" fill="#4F86F7" stroke="#3b6ccf" strokeWidth="2"/>
                <path d="M95 30 Q105 0 60 25" fill="#4F86F7" stroke="#3b6ccf" strokeWidth="2"/>
                <path d="M10 30 Q5 10 35 25" fill="#ffb7d5" /> 
                <path d="M90 30 Q95 10 65 25" fill="#ffb7d5" />
                <path d="M20 50 Q20 20 50 20 T80 50 Q80 80 50 80 T20 50" fill="#4F86F7" stroke="#3b6ccf" strokeWidth="2"/>
                <ellipse cx="38" cy="45" rx="8" ry="10" fill="#1a1a1a" />
                <ellipse cx="62" cy="45" rx="8" ry="10" fill="#1a1a1a" />
                <circle cx="40" cy="42" r="2" fill="white" />
                <circle cx="60" cy="42" r="2" fill="white" />
                <path d="M42 58 Q50 65 58 58" fill="#0f2b6e" />
                <ellipse cx="50" cy="56" rx="6" ry="4" fill="#0f2b6e" />
            </svg>
        );

        const POPULAR_CITIES = ["–ö–∏—ó–≤", "–•–∞—Ä–∫—ñ–≤", "–û–¥–µ—Å–∞", "–î–Ω—ñ–ø—Ä–æ", "–õ—å–≤—ñ–≤", "–ó–∞–ø–æ—Ä—ñ–∂–∂—è", "–í—ñ–Ω–Ω–∏—Ü—è", "–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∏–π", "–ñ–∏—Ç–æ–º–∏—Ä", "–ß–µ—Ä–Ω—ñ–≤—Ü—ñ", "–†—ñ–≤–Ω–µ", "–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫", "–¢–µ—Ä–Ω–æ–ø—ñ–ª—å", "–õ—É—Ü—å–∫", "–£–∂–≥–æ—Ä–æ–¥", "–ë—ñ–ª–∞ –¶–µ—Ä–∫–≤–∞"];

        // –î–µ–º–æ-—Ç–æ–≤–∞—Ä–∏ (—è–∫—â–æ –±–∞–∑–∞ —â–µ –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∞)
        const INITIAL_PRODUCTS = [
            { id: '1', name: "–ö—ñ–≥—É—Ä—É–º—ñ –°—Ç—ñ—á –°–∏–Ω—ñ–π", price: 650, category: "–ö—ñ–≥—É—Ä—É–º—ñ", image: "https://cf.shopee.com.br/file/0b8967b2727482b49f7278436910271d", rating: 5 },
            { id: '2', name: "–ü—ñ–∂–∞–º–∞ –Ñ–¥–∏–Ω–æ—Ä—ñ–≥", price: 700, category: "–ö—ñ–≥—É—Ä—É–º—ñ", image: "https://m.media-amazon.com/images/I/71isX2yKkYL._AC_UY1000_.jpg", rating: 5 }
        ];

        function App() {
            const [products, setProducts] = useState([]);
            const [loading, setLoading] = useState(true);
            const [dbError, setDbError] = useState(null);
            const [activePage, setActivePage] = useState('home');
            const [cart, setCart] = useState([]);
            const [isCartOpen, setIsCartOpen] = useState(false);
            const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
            const [isAdminMode, setIsAdminMode] = useState(false);
            const [passwordInput, setPasswordInput] = useState("");
            const [showLoginModal, setShowLoginModal] = useState(false);
            const [selectedCategory, setSelectedCategory] = useState(null);

            // –î–∞–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
            const [customerName, setCustomerName] = useState("");
            const [customerPhone, setCustomerPhone] = useState("");
            const [customerCity, setCustomerCity] = useState("");
            const [customerBranch, setCustomerBranch] = useState("");
            const [paymentMethod, setPaymentMethod] = useState("cod");
            const [isOrderSending, setIsOrderSending] = useState(false);

            const TELEGRAM_BOT_TOKEN = "8490403071:AAFZvriLL_vzQq-ziMVTfiHAu8DmtH84Fjk"; 
            const TELEGRAM_CHAT_ID = "7085928669";
            const ADMIN_PASSWORD = "toy@56";

            // --- –°–ò–ù–•–†–û–ù–Ü–ó–ê–¶–Ü–Ø –ó –ë–ê–ó–û–Æ ---
            useEffect(() => {
                if (!db) {
                    setProducts(INITIAL_PRODUCTS);
                    setLoading(false);
                    return;
                }

                // –ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
                const unsubscribe = db.collection("products").onSnapshot((snapshot) => {
                    const productsData = snapshot.docs.map(doc => ({
                        id: doc.id,
                        ...doc.data()
                    }));
                    setProducts(productsData.length > 0 ? productsData : []); // –ü–æ–∫–∞–∑—É—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π —Å–ø–∏—Å–æ–∫, —è–∫—â–æ –±–∞–∑–∞ –ø—É—Å—Ç–∞
                    setDbError(null);
                    setLoading(false);
                }, (error) => {
                    console.error("Error fetching products:", error);
                    let errorMsg = "–ü–æ–º–∏–ª–∫–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.";
                    if (error.code === 'not-found' || error.message.includes('does not exist')) {
                        errorMsg = "–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —â–µ –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–∞ —É Firebase Console. –ó–∞–π–¥—ñ—Ç—å —É Build -> Firestore Database -> Create Database.";
                    } else if (error.code === 'permission-denied') {
                        errorMsg = "–ù–µ–º–∞—î –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É. –ó–∞–π–¥—ñ—Ç—å —É –≤–∫–ª–∞–¥–∫—É 'Rules' —É Firebase —ñ –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Å—Ç–æ—ó—Ç—å 'Test Mode' (allow read, write: if true).";
                    }
                    setDbError(errorMsg);
                    setProducts(INITIAL_PRODUCTS); // Fallback
                    setLoading(false);
                });

                return () => unsubscribe();
            }, []);

            // –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è
            const uniqueCategories = useMemo(() => {
                const cats = new Set(products.map(p => p.category).filter(Boolean));
                return Array.from(cats);
            }, [products]);

            const filteredProducts = selectedCategory 
                ? products.filter(p => p.category === selectedCategory)
                : products;

            // --- –§–£–ù–ö–¶–Ü–á –ê–î–ú–Ü–ù–ö–ò ---
            const addNewProduct = async () => {
                if (!db) return alert("–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞!");
                try {
                    await db.collection("products").add({
                        name: "–ù–æ–≤–∏–π –¢–æ–≤–∞—Ä",
                        price: 0,
                        category: uniqueCategories[0] || "–ó–∞–≥–∞–ª—å–Ω–µ",
                        image: "https://via.placeholder.com/300?text=–§–æ—Ç–æ",
                        rating: 5,
                        createdAt: Date.now()
                    });
                } catch (e) {
                    console.error(e);
                    alert("–ü–æ–º–∏–ª–∫–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è. –ú–æ–∂–ª–∏–≤–æ, –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –∞–±–æ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø—É.");
                }
            };

            const updateProductField = async (id, field, value) => {
                if (!db) return;
                try {
                    await db.collection("products").doc(id).update({ [field]: value });
                } catch (e) { console.error(e); }
            };

            const removeProduct = async (id) => {
                if (!db) return;
                if (confirm("–í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π —Ç–æ–≤–∞—Ä –Ω–∞–∑–∞–≤–∂–¥–∏?")) {
                    try { await db.collection("products").doc(id).delete(); } catch (e) { console.error(e); }
                }
            };

            const handleFileUpload = (e, productId) => {
                const file = e.target.files[0];
                if (file) {
                    if (file.size > 800000) { alert("–§–æ—Ç–æ –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–µ! –ú–∞–∫—Å–∏–º—É–º 800–ö–±."); return; }
                    const reader = new FileReader();
                    reader.onloadend = () => { updateProductField(productId, 'image', reader.result); };
                    reader.readAsDataURL(file);
                }
            };

            // --- –ö–û–®–ò–ö ---
            const addToCart = (p) => {
                const safePrice = Number(p.price) || 0;
                const existing = cart.find(i => i.id === p.id);
                if (existing) setCart(cart.map(i => i.id === p.id ? { ...i, quantity: i.quantity + 1 } : i));
                else setCart([...cart, { ...p, price: safePrice, quantity: 1 }]);
                setIsCartOpen(true);
            };
            const updateQty = (id, delta) => setCart(cart.map(i => i.id === id ? { ...i, quantity: Math.max(1, i.quantity + delta) } : i));
            const removeFromCart = (id) => setCart(cart.filter(i => i.id !== id));
            const totalAmount = cart.reduce((sum, i) => sum + ((Number(i.price)||0) * i.quantity), 0);

            const handleLogin = (e) => {
                e.preventDefault();
                if (passwordInput === ADMIN_PASSWORD) { setIsAdminMode(true); setShowLoginModal(false); setPasswordInput(""); }
                else { alert("–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å!"); }
            };

            const sendOrder = async (e) => {
                e.preventDefault();
                setIsOrderSending(true);
                const payText = paymentMethod === 'cod' ? 'üì¶ –ù–∞–∫–ª–∞–¥–Ω–∏–π' : 'üí≥ –ù–∞ –∫–∞—Ä—Ç—É';
                let msg = `<b>üî• –ó–ê–ú–û–í–õ–ï–ù–ù–Ø!</b>\nüë§ ${customerName}\nüìû ${customerPhone}\nüèô ${customerCity}, ‚Ññ${customerBranch}\nüí∞ ${payText}\n\n`;
                cart.forEach((i, idx) => msg += `${idx+1}. ${i.name} (x${i.quantity}) - ${i.price * i.quantity} –≥—Ä–Ω\n`);
                msg += `\nüíµ <b>–°–£–ú–ê: ${totalAmount} –≥—Ä–Ω</b>`;

                try {
                    await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                        method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ chat_id: TELEGRAM_CHAT_ID, text: msg, parse_mode: 'HTML' })
                    });
                    alert(`–î—è–∫—É—é, ${customerName}! –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ.`); setCart([]); setIsCartOpen(false);
                } catch (e) { alert("–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏."); }
                finally { setIsOrderSending(false); }
            };

            // --- –í–Ü–î–û–ë–†–ê–ñ–ï–ù–ù–Ø (UI) ---
            
            const ProductCard = ({ p }) => (
                <div className="bg-white rounded-3xl shadow-sm hover:shadow-xl transition border border-pink-100 flex flex-col h-full group">
                    <div className="relative h-64 bg-white p-4 flex items-center justify-center border-b border-pink-50">
                        <img src={p.image} className="w-full h-full object-contain group-hover:scale-105 transition duration-500" />
                    </div>
                    <div className="p-4 flex-1 flex flex-col">
                        {p.category && <div className="text-[10px] text-pink-500 font-bold uppercase mb-2 bg-pink-50 inline-block px-2 py-1 rounded w-fit">{p.category}</div>}
                        <h3 className="font-bold text-gray-800 leading-tight mb-2 line-clamp-2">{p.name}</h3>
                        <div className="mt-auto pt-3 border-t border-gray-50 flex justify-between items-center">
                            <span className="text-xl font-black text-pink-600">{p.price} <span className="text-sm font-medium text-gray-400">–≥—Ä–Ω</span></span>
                            <button onClick={() => addToCart(p)} className="bg-gray-100 text-gray-600 px-4 py-2 rounded-full hover:bg-pink-500 hover:text-white transition active:scale-95 flex items-center gap-2">
                                <ShoppingCart size={18}/> <span className="text-xs font-bold">–ö—É–ø–∏—Ç–∏</span>
                            </button>
                        </div>
                    </div>
                </div>
            );

            // --- –ê–î–ú–Ü–ù –ü–ê–ù–ï–õ–¨ ---
            const renderAdmin = () => (
                <div className="max-w-6xl mx-auto px-4 py-8 animate-fade-in">
                    <div className="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
                        <div>
                            <h2 className="text-3xl font-bold text-gray-800 mb-2">–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å</h2>
                            <p className="text-sm text-gray-500">–î–æ–¥–∞–≤–∞–π—Ç–µ —Ç–∞ —Ä–µ–¥–∞–≥—É–π—Ç–µ —Ç–æ–≤–∞—Ä–∏.</p>
                        </div>
                        <button onClick={addNewProduct} className="flex items-center gap-2 bg-indigo-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-indigo-700 transition"><Plus size={20}/> –î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä</button>
                    </div>
                    
                    {dbError && (
                        <div className="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm">
                            <p className="font-bold mb-1">–£–≤–∞–≥–∞! –ü—Ä–æ–±–ª–µ–º–∞ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö:</p>
                            <p>{dbError}</p>
                        </div>
                    )}

                    {loading ? <div className="loader"></div> : (
                        <div className="bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden">
                            {products.length === 0 && <div className="p-12 text-center text-gray-500"><p>–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤ –ø–æ—Ä–æ–∂–Ω—ñ–π.</p></div>}
                            {products.map(p => (
                                <div key={p.id} className="flex items-center gap-4 p-4 border-b border-gray-50 hover:bg-pink-50/30">
                                    <div className="relative group w-20 h-20 shrink-0">
                                        <input type="file" id={`upl-${p.id}`} className="hidden" accept="image/*" onChange={(e) => handleFileUpload(e, p.id)}/>
                                        <div className="w-full h-full rounded-xl bg-gray-50 border border-gray-200 cursor-pointer overflow-hidden" onClick={() => document.getElementById(`upl-${p.id}`).click()}>
                                            <img src={p.image} className="w-full h-full object-contain p-1" />
                                            <div className="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition"><Upload className="text-white" size={20}/></div>
                                        </div>
                                    </div>
                                    <div className="flex-1 w-full space-y-2">
                                        <input value={p.name} onChange={(e) => updateProductField(p.id, 'name', e.target.value)} className="w-full font-bold bg-transparent focus:bg-white rounded px-2 outline-none border border-transparent focus:border-pink-300" placeholder="–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É"/>
                                        <div className="relative">
                                            <input list={`tags-${p.id}`} value={p.category} onChange={(e) => updateProductField(p.id, 'category', e.target.value)} className="text-sm bg-gray-50 rounded px-2 py-1 w-full outline-none border border-transparent focus:border-pink-300" placeholder="–ö–∞—Ç–µ–≥–æ—Ä—ñ—è"/>
                                            <datalist id={`tags-${p.id}`}>{uniqueCategories.map(c=><option key={c} value={c}/>)}</datalist>
                                        </div>
                                    </div>
                                    <div className="w-24">
                                        <input type="number" value={p.price} onChange={(e) => updateProductField(p.id, 'price', Number(e.target.value))} className="w-full font-bold text-pink-600 bg-transparent focus:bg-white rounded px-2 outline-none"/>
                                    </div>
                                    <button onClick={() => removeProduct(p.id)} className="p-2 text-red-400 hover:bg-red-100 p-2 rounded"><Trash2 size={20}/></button>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );

            // --- –ì–û–õ–û–í–ù–ê –°–¢–û–†–Ü–ù–ö–ê ---
            const renderHome = () => (
                <div className="max-w-6xl mx-auto px-4 py-8">
                    <div className="bg-gradient-to-br from-pink-500 via-purple-400 to-indigo-400 rounded-[2.5rem] p-8 md:p-14 mb-12 text-white shadow-2xl relative overflow-hidden text-center">
                        <div className="relative z-10 max-w-2xl mx-auto">
                            <span className="inline-block bg-white/20 backdrop-blur-md px-4 py-2 rounded-full text-sm font-bold uppercase mb-6 border border-white/30">üéÅ –û—Ñ—ñ—Ü—ñ–π–Ω–∏–π –º–∞–≥–∞–∑–∏–Ω</span>
                            <h1 className="text-4xl md:text-6xl font-extrabold mb-6">–ú–∞–≥–∞–∑–∏–Ω –Ω–∞—Å—Ç—Ä–æ—é ‚ú®</h1>
                            <p className="text-lg opacity-95">–ù–∞–π–º–∏–ª—ñ—à—ñ –∫—ñ–≥—É—Ä—É–º—ñ —Ç–∞ —ñ–≥—Ä–∞—à–∫–∏ –¥–ª—è –Ω–∞–π—Ä—ñ–¥–Ω—ñ—à–∏—Ö.</p>
                        </div>
                    </div>
                    
                    <div className="mb-8">
                        <h2 className="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2"><Gift className="text-pink-500"/> –ö–∞—Ç–∞–ª–æ–≥</h2>
                        {uniqueCategories.length > 0 && (
                            <div className="flex flex-wrap gap-2 animate-fade-in">
                                <button onClick={()=>setSelectedCategory(null)} className={`px-4 py-2 rounded-full text-sm font-bold transition ${selectedCategory === null ? 'bg-pink-500 text-white shadow-md' : 'bg-white text-gray-600 hover:bg-pink-50 border border-pink-100'}`}>–í—Å—ñ</button>
                                {uniqueCategories.map(cat => (
                                    <button key={cat} onClick={() => setSelectedCategory(cat)} className={`px-4 py-2 rounded-full text-sm font-bold transition ${selectedCategory === cat ? 'bg-pink-500 text-white shadow-md' : 'bg-white text-gray-600 hover:bg-pink-50 border border-pink-100'}`}>{cat}</button>
                                ))}
                            </div>
                        )}
                    </div>
                    
                    {loading ? <div className="loader"></div> : (
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mb-16">
                            {filteredProducts.length === 0 && <div className="col-span-full text-center text-gray-400 py-10">–¢–æ–≤–∞—Ä—ñ–≤ –Ω–µ–º–∞—î.</div>}
                            {filteredProducts.map(p => <ProductCard key={p.id} p={p}/>)}
                        </div>
                    )}
                </div>
            );

            // --- –°–¢–ê–¢–ò–ß–ù–Ü –°–¢–û–†–Ü–ù–ö–ò ---
            const renderDelivery = () => (
                <div className="max-w-4xl mx-auto px-4 py-12 animate-fade-in">
                    <h1 className="text-3xl font-extrabold text-center mb-8">–î–æ—Å—Ç–∞–≤–∫–∞ —Ç–∞ –û–ø–ª–∞—Ç–∞</h1>
                    <div className="grid md:grid-cols-2 gap-8">
                        <div className="bg-white p-8 rounded-3xl shadow-lg border border-pink-100">
                            <div className="bg-red-50 w-16 h-16 rounded-2xl flex items-center justify-center mb-6 text-red-600"><Truck size={32}/></div>
                            <h2 className="text-xl font-bold mb-4">–ù–æ–≤–∞ –ü–æ—à—Ç–∞</h2>
                            <ul className="space-y-2 text-gray-600"><li>üöÄ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ –¥–µ–Ω—å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</li><li>üì¶ 1-2 –¥–Ω—ñ –ø–æ –£–∫—Ä–∞—ó–Ω—ñ</li></ul>
                        </div>
                        <div className="bg-white p-8 rounded-3xl shadow-lg border border-pink-100">
                            <div className="bg-green-50 w-16 h-16 rounded-2xl flex items-center justify-center mb-6 text-green-600"><CreditCard size={32}/></div>
                            <h2 className="text-xl font-bold mb-4">–û–ø–ª–∞—Ç–∞</h2>
                            <ul className="space-y-2 text-gray-600"><li>üíµ –ù–∞–∫–ª–∞–¥–Ω–∏–π –ø–ª–∞—Ç—ñ–∂</li><li>üí≥ –ù–∞ –∫–∞—Ä—Ç—É (Monobank/Privat)</li></ul>
                        </div>
                    </div>
                </div>
            );

            const renderAbout = () => (
                <div className="max-w-4xl mx-auto px-4 py-12 animate-fade-in">
                    <div className="bg-white rounded-[2.5rem] p-8 md:p-12 shadow-xl border border-pink-50 text-center">
                        <div className="w-24 h-24 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-6"><Heart size={40} className="text-pink-500"/></div>
                        <h1 className="text-3xl md:text-4xl font-extrabold text-gray-800 mb-6">–ü—Ä–æ Sweety World</h1>
                        <p className="text-lg text-gray-600 leading-relaxed mb-8">–ú–∏ - –∫–æ–º–∞–Ω–¥–∞ –µ–Ω—Ç—É–∑—ñ–∞—Å—Ç—ñ–≤, —è–∫—ñ –≤—ñ—Ä—è—Ç—å, —â–æ –æ–¥—è–≥ –º–∞—î –ø—Ä–∏–Ω–æ—Å–∏—Ç–∏ —Ä–∞–¥—ñ—Å—Ç—å! –ó 2020 —Ä–æ–∫—É –º–∏ –∑—ñ–≥—Ä—ñ–≤–∞—î–º–æ –∫–ª—ñ—î–Ω—Ç—ñ–≤ –ø–æ –≤—Å—ñ–π –£–∫—Ä–∞—ó–Ω—ñ.</p>
                    </div>
                </div>
            );

            // --- –ì–û–õ–û–í–ù–ò–ô –†–ï–ù–î–ï–† ---
            return (
                <div className="min-h-screen flex flex-col relative">
                    <nav className="sticky top-0 z-40 bg-white/90 backdrop-blur-md shadow-sm border-b border-pink-100">
                        <div className="max-w-6xl mx-auto px-4">
                            <div className="flex justify-between items-center h-16">
                                <div className="flex items-center gap-3 cursor-pointer" onClick={() => {setIsAdminMode(false); setActivePage('home')}}>
                                    <div className="bg-white p-1 rounded-full border-2 border-pink-200"><StitchLogo/></div>
                                    <span className="text-xl font-black tracking-tight">Sweety<span className="text-pink-500">World</span></span>
                                    {isAdminMode && <span className="ml-2 bg-indigo-600 text-white text-[10px] px-2 py-1 rounded-full font-bold">Admin</span>}
                                </div>
                                <div className="hidden md:flex gap-6 font-bold text-gray-600 ml-10 mr-auto">
                                    <button onClick={() => setActivePage('home')} className="hover:text-pink-500">–ì–æ–ª–æ–≤–Ω–∞</button>
                                    <button onClick={() => setActivePage('delivery')} className="hover:text-pink-500">–î–æ—Å—Ç–∞–≤–∫–∞</button>
                                    <button onClick={() => setActivePage('about')} className="hover:text-pink-500">–ü—Ä–æ –Ω–∞—Å</button>
                                </div>
                                <div className="flex items-center gap-3">
                                    {!isAdminMode && <button onClick={() => setIsCartOpen(true)} className="relative px-4 py-2 bg-white text-pink-500 rounded-full hover:bg-pink-50 border border-pink-100 shadow-sm flex items-center gap-2">
                                        <ShoppingCart size={22}/> <span className="font-bold text-sm hidden sm:inline">–ö–æ—à–∏–∫</span>
                                        {cart.length > 0 && <span className="bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center ml-1">{cart.reduce((a,b)=>a+b.quantity,0)}</span>}
                                    </button>}
                                    {isAdminMode && <button onClick={() => setIsAdminMode(false)} className="p-2.5 rounded-full border bg-red-50 text-red-500 hover:bg-red-100" title="–í–∏–π—Ç–∏"><LogOut size={22}/></button>}
                                    {!isAdminMode && <button onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)} className="md:hidden p-2.5 rounded-full border">{isMobileMenuOpen ? <X size={22}/> : <Menu size={22}/>}</button>}
                                </div>
                            </div>
                        </div>
                        {isMobileMenuOpen && !isAdminMode && (
                            <div className="md:hidden absolute top-16 left-0 w-full bg-white border-b shadow-xl p-4 flex flex-col gap-4 font-bold text-center">
                                <button onClick={() => {setActivePage('home'); setIsMobileMenuOpen(false)}}>–ì–æ–ª–æ–≤–Ω–∞</button>
                                <button onClick={() => {setActivePage('delivery'); setIsMobileMenuOpen(false)}}>–î–æ—Å—Ç–∞–≤–∫–∞</button>
                                <button onClick={() => {setActivePage('about'); setIsMobileMenuOpen(false)}}>–ü—Ä–æ –Ω–∞—Å</button>
                            </div>
                        )}
                    </nav>

                    <div className="flex-grow">
                        {isAdminMode ? renderAdmin() : (
                            activePage === 'delivery' ? renderDelivery() : 
                            activePage === 'about' ? renderAbout() : 
                            renderHome()
                        )}
                    </div>

                    {!isAdminMode && (
                        <footer className="bg-gray-900 text-gray-300 pt-16 pb-8 mt-auto rounded-t-[3rem]">
                            <div className="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 items-start">
                                <div>
                                    <div className="flex items-center gap-2 mb-4"><div className="bg-gray-800 p-1 rounded-full"><StitchLogo/></div><span className="text-xl font-bold text-white tracking-tight">Sweety<span className="text-pink-500">World</span></span></div>
                                    <p className="text-sm mt-4 text-gray-400">–¢–≤—ñ–π —É–ª—é–±–ª–µ–Ω–∏–π –º–∞–≥–∞–∑–∏–Ω –ø—ñ–∂–∞–º —Ç–∞ —ñ–≥—Ä–∞—à–æ–∫. –î–∞—Ä—É—î–º–æ —Ä–∞–¥—ñ—Å—Ç—å —Ç–∞ —Ç–µ–ø–ª–æ –∑ 2020 —Ä–æ–∫—É.</p>
                                </div>
                                <div>
                                    <h3 className="text-white font-bold mb-6">–ö–ª—ñ—î–Ω—Ç–∞–º</h3>
                                    <ul className="space-y-3 text-sm">
                                        <li><button onClick={() => setActivePage('delivery')} className="hover:text-pink-500 transition flex items-center gap-2"><Truck size={16}/> –î–æ—Å—Ç–∞–≤–∫–∞ —Ç–∞ –æ–ø–ª–∞—Ç–∞</button></li>
                                        <li><button onClick={() => setActivePage('about')} className="hover:text-pink-500 transition flex items-center gap-2"><Heart size={16}/> –ü—Ä–æ –Ω–∞—Å</button></li>
                                    </ul>
                                </div>
                                <div>
                                    <h3 className="text-white font-bold mb-6">–ö–æ–Ω—Ç–∞–∫—Ç–∏</h3>
                                    <ul className="space-y-3 text-sm">
                                        <li className="flex items-center gap-3"><Phone size={18} className="text-pink-500"/> <a href="tel:+380971234567" className="hover:text-pink-500 transition">+38 (097) 123 45 67</a></li>
                                        <li className="flex items-center gap-3"><svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" strokeWidth="2" fill="none" strokeLinecap="round" strokeLinejoin="round" className="text-pink-500"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg> <a href="#" target="_blank" className="hover:text-pink-500 transition">@sweety_world_ua</a></li>
                                        <li className="flex items-center gap-3"><Send size={18} className="text-pink-500"/> <a href="https://t.me/sweety_world" target="_blank" className="hover:text-pink-500 transition">Telegram: @manager</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div className="max-w-6xl mx-auto px-4 pt-8 mt-8 border-t border-gray-800 text-xs text-gray-500 flex justify-between items-center">
                                <p>¬© 2024 Sweety World.</p>
                                <button onClick={() => setShowLoginModal(true)} className="bg-white/10 hover:bg-white/20 text-gray-400 hover:text-white p-3 rounded-full transition duration-300 shadow-sm border border-transparent hover:border-pink-500/30" title="–í—Ö—ñ–¥ –¥–ª—è –≤–ª–∞—Å–Ω–∏–∫–∞"><Lock size={16}/></button>
                            </div>
                        </footer>
                    )}

                    {showLoginModal && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center bg-gray-900/40 backdrop-blur-md" onClick={() => setShowLoginModal(false)}>
                            <div className="bg-white rounded-[2rem] shadow-2xl p-8 max-w-sm w-full relative" onClick={e => e.stopPropagation()}>
                                <h3 className="text-2xl font-extrabold text-center mb-6">–í—Ö—ñ–¥ Admin</h3>
                                <form onSubmit={handleLogin}>
                                    <input type="password" value={passwordInput} onChange={(e) => setPasswordInput(e.target.value)} className="w-full px-5 py-4 rounded-xl bg-gray-50 border-2 font-bold text-center text-lg mb-6" placeholder="–ü–∞—Ä–æ–ª—å" autoFocus />
                                    <button className="w-full bg-pink-500 text-white py-4 rounded-xl font-bold">–£–≤—ñ–π—Ç–∏</button>
                                </form>
                            </div>
                        </div>
                    )}

                    {isCartOpen && !isAdminMode && (
                        <div className="fixed inset-0 z-50 flex justify-end">
                            <div className="absolute inset-0 bg-gray-900/50 backdrop-blur-sm" onClick={() => setIsCartOpen(false)}></div>
                            <div className="w-full max-w-md bg-[#fff0f5] h-full shadow-2xl flex flex-col relative animate-fade-in ml-auto z-50">
                                <div className="px-6 py-5 border-b border-pink-100 flex justify-between items-center bg-white">
                                    <h2 className="text-xl font-bold flex gap-2"><ShoppingCart className="text-pink-500"/> –ö–æ—à–∏–∫</h2>
                                    <button onClick={() => setIsCartOpen(false)} className="p-2 hover:bg-gray-100 rounded-full transition"><X size={20}/></button>
                                </div>
                                <div className="flex-1 overflow-auto p-4">
                                    {cart.length === 0 ? <div className="text-center text-gray-500 mt-10">–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π...</div> : (
                                        <>
                                        <div className="space-y-4 mb-8">
                                            {cart.map(item => (
                                                <div key={item.id} className="bg-white p-4 rounded-2xl shadow-sm border border-pink-50 flex gap-4">
                                                    <img src={item.image} className="w-16 h-16 object-contain bg-gray-50 rounded-lg"/>
                                                    <div className="flex-1">
                                                        <div className="flex justify-between items-start"><div className="font-bold text-sm">{item.name}</div><button onClick={() => removeFromCart(item.id)} className="text-gray-300 hover:text-red-500"><Trash2 size={16}/></button></div>
                                                        <div className="flex justify-between items-end mt-2">
                                                            <div className="font-bold text-pink-600">{item.price} –≥—Ä–Ω</div>
                                                            <div className="flex items-center gap-1 bg-gray-50 rounded-lg border p-0.5">
                                                                <button onClick={() => updateQty(item.id, -1)} className="p-1 hover:bg-white rounded"><Minus size={16}/></button>
                                                                <span className="font-bold min-w-[20px] text-center text-sm">{item.quantity}</span>
                                                                <button onClick={() => updateQty(item.id, 1)} className="p-1 hover:bg-white rounded"><Plus size={16}/></button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                        <div className="bg-white p-6 rounded-3xl shadow-sm border border-pink-100 space-y-4">
                                            <h3 className="font-bold mb-4 flex gap-2"><Edit2 className="text-pink-500" size={16}/> –û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è</h3>
                                            <form onSubmit={sendOrder} className="space-y-3">
                                                <input required value={customerName} onChange={e => setCustomerName(e.target.value)} className="w-full px-4 py-3 rounded-xl bg-gray-50 border focus:border-pink-500 outline-none" placeholder="–ü–Ü–ë"/>
                                                <input required type="tel" value={customerPhone} onChange={e => setCustomerPhone(e.target.value)} className="w-full px-4 py-3 rounded-xl bg-gray-50 border focus:border-pink-500 outline-none" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω"/>
                                                <div className="bg-gray-50 p-3 rounded-xl border">
                                                    <div className="text-xs font-bold text-red-600 mb-2 flex gap-1"><Truck size={12}/> –ù–æ–≤–∞ –ü–æ—à—Ç–∞</div>
                                                    <input list="cities" required value={customerCity} onChange={e => setCustomerCity(e.target.value)} className="w-full px-3 py-2 rounded-lg border mb-2 text-sm" placeholder="–ú—ñ—Å—Ç–æ"/>
                                                    <datalist id="cities">{POPULAR_CITIES.map(c => <option key={c} value={c}/>)}</datalist>
                                                    <input required value={customerBranch} onChange={e => setCustomerBranch(e.target.value)} className="w-full px-3 py-2 rounded-lg border text-sm" placeholder="–í—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è ‚Ññ"/>
                                                </div>
                                                <div className="bg-gray-50 p-3 rounded-xl border">
                                                    <div className="text-xs font-bold text-green-600 mb-2 flex gap-1"><CreditCard size={12}/> –û–ø–ª–∞—Ç–∞</div>
                                                    <label className="flex items-center gap-2 p-2 hover:bg-white cursor-pointer"><input type="radio" name="pay" checked={paymentMethod==='cod'} onChange={()=>setPaymentMethod('cod')} className="text-pink-500"/><span className="text-sm">–ù–∞–∫–ª–∞–¥–Ω–∏–π</span></label>
                                                    <label className="flex items-center gap-2 p-2 hover:bg-white cursor-pointer"><input type="radio" name="pay" checked={paymentMethod==='card'} onChange={()=>setPaymentMethod('card')} className="text-pink-500"/><span className="text-sm">–ù–∞ –∫–∞—Ä—Ç—É</span></label>
                                                </div>
                                                <div className="pt-4 mt-4 border-t border-dashed flex justify-between items-center">
                                                    <div className="text-xl font-black">–°—É–º–∞: <span className="text-pink-600">{totalAmount} –≥—Ä–Ω</span></div>
                                                    <button disabled={isOrderSending} className="bg-pink-500 text-white px-6 py-3 rounded-xl font-bold hover:bg-pink-600 transition flex items-center gap-2">{isOrderSending ? '...' : <><Send size={18}/> –ó–∞–º–æ–≤–∏—Ç–∏</>}</button>
                                                </div>
                                            </form>
                                        </div>
                                        </>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
